CREATE TABLE "hosts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(50) NOT NULL);
CREATE TABLE "isolates" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "isolates_genBank_id" varchar(100), "date" datetime, "virus_name" varchar(100), "location_id" integer, "pathogen_id" integer, "host_id" integer);
CREATE TABLE "isolates_genBank" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "genBank_id" varchar(100) NOT NULL, "host" varchar(30) NOT NULL, "subtype" varchar(4) NOT NULL, "country" varchar(30) NOT NULL, "date" datetime NOT NULL, "virus_name" varchar(100) NOT NULL, "mutation" varchar(30) NOT NULL, "age" varchar(10) NOT NULL, "gender" varchar(10) NOT NULL, "location_id" integer, "genBank_name" varchar(50) NOT NULL, "pathogen_id" integer, "host_id" integer);
CREATE TABLE "isolates_gisaid" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "gisaid_id" varchar(100) NOT NULL, "host" varchar(30) NOT NULL, "subtype" varchar(4) NOT NULL, "location" varchar(30) NOT NULL, "date" datetime NOT NULL, "virus_name" varchar(100) NOT NULL, "mutation" varchar(30) NOT NULL, "age" varchar(10) NOT NULL, "gender" varchar(10) NOT NULL, "location_id" integer, "ncbi_name" varchar(50) NOT NULL, "pathogen_id" integer, "host_id" integer);
CREATE TABLE "isolates_old" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "tax_id" varchar(50), "isolate_id" varchar(50), "sequence_ids" varchar(255), "name" varchar(50), "virus_type" varchar(50), "passage" varchar(50), "collect_date" varchar(50), "host" varchar(50), "location" varchar(255), "notes" varchar(50), "update_date" datetime, "is_public" varchar(50), "isolate_submitter" varchar(255), "sample_lab" varchar(50), "sequence_lab" varchar(255), "iv_animal_vaccin_product" varchar(50), "resist_to_adamantanes" varchar(50), "resist_to_oseltamivir" varchar(50), "resist_to_zanamivir" varchar(50), "resist_to_peramivir" varchar(50), "resist_to_other" varchar(50), "h1n1_swine_set" varchar(50), "lab_culture" varchar(50), "is_complete" varchar(50), "iv_sample_id" varchar(50), "date_selected_for_vaccine" varchar(50), "provider_sample_id" varchar(50), "antigen_character" varchar(255), "pathogen_test_info" varchar(50), "antiviral_resistance" varchar(50), "authors" varchar(50), "is_vaccinated" varchar(50), "human_specimen_source" varchar(50), "animal_specimen_source" varchar(50), "animal_health_status" varchar(50), "animal_domestic_status" varchar(50), "source_name" varchar(50), "geoplace_name" varchar(50), "host_age" integer, "host_gender" varchar(50), "zip_code" varchar(50), "patient_status" varchar(50), "antiviral_treatment" varchar(50), "outbreak" varchar(50), "vaccination_last_year" datetime, "pathogenicity" text, "computed_antiviral" text, "latitude" integer(10), "longitude" integer(10), "created_at" datetime, "pathogen" varchar(20));
CREATE TABLE "locations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "country" varchar(30) NOT NULL, "gen_bank_label" varchar(30) NOT NULL, "latitude" float, "longitude" float, "name" varchar(100), "local" varchar(30), "continent" varchar(30) NOT NULL);
CREATE TABLE "pathogens" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(4) NOT NULL);
CREATE TABLE "poy_jobs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "query_id" integer, "status" integer DEFAULT 0 NOT NULL, "kml" text(16777215), "aligned_fasta" text(16777215), "output" text(16777215), "fasta" text(16777215), "geo" text(16777215), "poy" text(16777215), "outgroup" integer, "search_time" integer, "service_job" integer, "tree" text(16777215), "poy_output" text(16777215), "created_at" datetime);
CREATE TABLE "proteins" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(10) NOT NULL);
CREATE TABLE "queries" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "name" varchar(255), "description" varchar(255), "pathogens" varchar(255), "hosts" varchar(1000), "locations" varchar(5000), "proteins" varchar(255), "max_collect_date" datetime, "min_collect_date" datetime, "created_at" datetime, "updated_at" datetime, "job_id" integer DEFAULT 0, "kml_status" integer DEFAULT 0, "total_sequences" integer DEFAULT 0, "is_public" boolean DEFAULT 'f', "sql" text);
CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL);
CREATE TABLE "sequences" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "isolate_id" integer, "protein_id" integer, "accession" varchar(30), "data" varchar(10000) NOT NULL);
CREATE TABLE "sequences_genBank" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "isolates_genBank_id" integer, "name" varchar(30) NOT NULL, "protein" varchar(5) NOT NULL, "data" varchar(10000) NOT NULL, "accession" varchar(30), "protein_id" integer);
CREATE TABLE "sequences_gisaid" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "Isolates_gisaid_id" integer, "name" varchar(30) NOT NULL, "protein" varchar(5) NOT NULL, "data" varchar(10000) NOT NULL, "accession" varchar(30), "protein_id" integer);
CREATE TABLE "sequences_old" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "genbank_acc_id" varchar(50), "sequence_id" varchar(50), "isolate_id" varchar(50), "data" text, "created_at" datetime, "sequence_type" varchar(50));
CREATE TABLE "sessions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "session_id" varchar(255) NOT NULL, "data" text(2147483647), "created_at" datetime, "updated_at" datetime);
CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "login" varchar(255) NOT NULL, "email" varchar(255) NOT NULL, "crypted_password" varchar(255) NOT NULL, "password_salt" varchar(255) NOT NULL, "persistence_token" varchar(255) NOT NULL, "single_access_token" varchar(255) NOT NULL, "perishable_token" varchar(255) NOT NULL, "login_count" integer DEFAULT 0 NOT NULL, "failed_login_count" integer DEFAULT 0 NOT NULL, "last_request_at" datetime, "current_login_at" datetime, "last_login_at" datetime, "current_login_ip" varchar(255), "last_login_ip" varchar(255));
CREATE INDEX "host" ON "isolates_old" ("host");
CREATE INDEX "id" ON "isolates_old" ("id");
CREATE INDEX "index_sessions_on_session_id" ON "sessions" ("session_id");
CREATE INDEX "index_sessions_on_updated_at" ON "sessions" ("updated_at");
CREATE INDEX "isolate_id" ON "isolates_old" ("isolate_id");
CREATE INDEX "location" ON "isolates_old" ("location");
CREATE INDEX "name" ON "isolates_old" ("name");
CREATE INDEX "name_host_location" ON "isolates_old" ("name", "host", "location");
CREATE INDEX "tax_id" ON "isolates_old" ("tax_id");
CREATE INDEX "tax_id_iso_id_name" ON "isolates_old" ("tax_id", "isolate_id", "name");
CREATE INDEX "tax_iso" ON "isolates_old" ("tax_id", "isolate_id");
CREATE UNIQUE INDEX "unique_isolates_u1" ON "isolates_old" ("tax_id", "isolate_id");
CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version");
INSERT INTO schema_migrations (version) VALUES ('0');