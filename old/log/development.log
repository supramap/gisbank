# Logfile created on 2011-05-03 13:30:31 -0400  [4;36;1mSQL (19.9ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (19.6ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing MenuController#index (for 127.0.0.1 at 2011-05-03 13:31:27) [GET]
  Parameters: {"controller"=>"menu", "action"=>"index"}
Rendering template within layouts/application
Rendering menu/index
  [4;36;1mUser Columns (20.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (20.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = '1') LIMIT 1[0m
Rendered menu/_login (119.6ms)
Completed in 137ms (View: 66, DB: 109) | 200 OK [http://0.0.0.0/]
  [4;36;1mSQL (19.9ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (19.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing SetController#private_queries (for 127.0.0.1 at 2011-05-03 13:31:31) [GET]
  Parameters: {"controller"=>"set", "action"=>"private_queries"}
  [4;36;1mUser Columns (17.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (16.7ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = '1') LIMIT 1[0m
Redirected to http://0.0.0.0:3000/user_session/new
Filter chain halted as [:require_user] rendered_or_redirected.
Completed in 119ms (DB: 88) | 302 Found [http://0.0.0.0/set/private_queries]
  [4;36;1mSQL (19.8ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (19.7ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UserSessionsController#new (for 127.0.0.1 at 2011-05-03 13:31:31) [GET]
  Parameters: {"controller"=>"user_sessions", "action"=>"new"}
  [4;36;1mUser Columns (12.8ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (14.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = '1') LIMIT 1[0m
Rendering template within layouts/application
Rendering user_sessions/new
Rendered menu/_login (0.1ms)
Completed in 92ms (View: 17, DB: 82) | 200 OK [http://0.0.0.0/user_session/new]
  [4;36;1mSQL (19.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (19.6ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UserSessionsController#create (for 127.0.0.1 at 2011-05-03 13:31:36) [POST]
  Parameters: {"user_session"=>{"login"=>"jacob", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Login", "controller"=>"user_sessions", "action"=>"create"}
  [4;36;1mUser Columns (12.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (19.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = '1') LIMIT 1[0m
  [4;36;1mUser Load (19.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (LOWER(`users`.login) = 'jacob') LIMIT 1[0m
  [4;35;1mSQL (16.5ms)[0m   [0mBEGIN[0m
  [4;36;1mUser Update (17.9ms)[0m   [0;1mUPDATE `users` SET `login_count` = 9, `last_login_at` = '2011-04-19 14:00:06', `current_login_at` = '2011-05-03 17:31:36', `last_login_ip` = '140.254.194.228', `current_login_ip` = '127.0.0.1', `last_request_at` = '2011-05-03 17:31:36', `perishable_token` = 'AxHMK83djtc2fOOH4' WHERE `id` = 1[0m
  [4;35;1mSQL (18.1ms)[0m   [0mCOMMIT[0m
Redirected to http://0.0.0.0:3000/set/private_queries
Completed in 237ms (DB: 161) | 302 Found [http://0.0.0.0/user_session]
  [4;36;1mSQL (20.0ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (19.7ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing SetController#private_queries (for 127.0.0.1 at 2011-05-03 13:31:36) [GET]
  Parameters: {"controller"=>"set", "action"=>"private_queries"}
  [4;36;1mUser Columns (22.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (13.9ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = '1') LIMIT 1[0m
  [4;36;1mSQL (17.4ms)[0m   [0;1mBEGIN[0m
  [4;35;1mUser Update (14.2ms)[0m   [0mUPDATE `users` SET `last_request_at` = '2011-05-03 17:31:36', `perishable_token` = 'UyPLg4yNJeWyeyY39V' WHERE `id` = 1[0m
  [4;36;1mSQL (18.0ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mQuery Load (12.6ms)[0m   [0mselect * from queries where user_id = 1[0m
Rendering template within layouts/application
Rendering set/private_queries
  [4;36;1mQuery Columns (16.5ms)[0m   [0;1mSHOW FIELDS FROM `queries`[0m
Rendered menu/_login (0.2ms)
Completed in 208ms (View: 23, DB: 169) | 200 OK [http://0.0.0.0/set/private_queries]
  [4;35;1mSQL (19.9ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (19.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing SetController#show (for 127.0.0.1 at 2011-05-03 13:31:40) [GET]
  Parameters: {"controller"=>"set", "action"=>"show", "id"=>"4"}
  [4;35;1mUser Columns (12.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (14.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = '1') LIMIT 1[0m
  [4;35;1mSQL (18.7ms)[0m   [0mBEGIN[0m
  [4;36;1mUser Update (15.0ms)[0m   [0;1mUPDATE `users` SET `last_request_at` = '2011-05-03 17:31:40', `perishable_token` = 'Y2uVU3JQIo6AIPy7Jgha' WHERE `id` = 1[0m
  [4;35;1mSQL (18.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mQuery Columns (11.8ms)[0m   [0;1mSHOW FIELDS FROM `queries`[0m
  [4;35;1mQuery Load (16.5ms)[0m   [0mSELECT * FROM `queries` WHERE (`queries`.`id` = 4) [0m
  [4;36;1mSQL (19.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mQuery Update (15.5ms)[0m   [0mUPDATE `queries` SET `sql` = 'SELECT sequences.*,\npathogen_id,\nhost_id,\nlocation_id,\nhosts.name as host,\nproteins.name as protein,\npathogens.name as subtype,\ncountry,\ndate,\nvirus_name,\nlocations.country+\'/\'+locations.local as location_name,\nlongitude,\nlatitude\nFROM sequences, isolates,locations,hosts,pathogens,proteins\nWHERE isolate_id=isolates.id and location_id =locations.id and host_id=hosts.id and pathogen_id = pathogens.id and protein_id = proteins.id\nand date > \'2008-04-15 00:00:00 UTC\'\nand date < \'2011-04-15 00:00:00 UTC\' and pathogen_id in(1) and protein_id in(1)', `updated_at` = '2011-05-03 17:31:40' WHERE `id` = 4[0m
  [4;36;1mSQL (19.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSequence Load (518.5ms)[0m   [0mSELECT sequences.*,
pathogen_id,
host_id,
location_id,
hosts.name as host,
proteins.name as protein,
pathogens.name as subtype,
country,
date,
virus_name,
locations.country+'/'+locations.local as location_name,
longitude,
latitude
FROM sequences, isolates,locations,hosts,pathogens,proteins
WHERE isolate_id=isolates.id and location_id =locations.id and host_id=hosts.id and pathogen_id = pathogens.id and protein_id = proteins.id
and date > '2008-04-15 00:00:00 UTC'
and date < '2011-04-15 00:00:00 UTC' and pathogen_id in(1) and protein_id in(1) LIMIT 0, 30[0m
  [4;36;1mSequence Count (196.3ms)[0m   [0;1mSELECT COUNT(*) FROM (SELECT sequences.*,
pathogen_id,
host_id,
location_id,
hosts.name as host,
proteins.name as protein,
pathogens.name as subtype,
country,
date,
virus_name,
locations.country+'/'+locations.local as location_name,
longitude,
latitude
FROM sequences, isolates,locations,hosts,pathogens,proteins
WHERE isolate_id=isolates.id and location_id =locations.id and host_id=hosts.id and pathogen_id = pathogens.id and protein_id = proteins.id
and date > '2008-04-15 00:00:00 UTC'
and date < '2011-04-15 00:00:00 UTC' and pathogen_id in(1) and protein_id in(1)) AS count_table[0m
  [4;35;1mPoyJob Load (652.5ms)[0m   [0mSELECT * FROM gisbank.poy_jobs where query_id =4[0m
Rendering template within layouts/application
Rendering set/show
  [4;36;1mPoyJob Columns (19.7ms)[0m   [0;1mSHOW FIELDS FROM `poy_jobs`[0m
  [4;35;1mQuery Load (32.6ms)[0m   [0mSELECT * FROM `queries` WHERE (`queries`.`id` = 4) [0m
  [4;36;1mSQL (19.0ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (16.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mSequence Columns (11.8ms)[0m   [0;1mSHOW FIELDS FROM `sequences`[0m
Rendered menu/_login (0.6ms)
Completed in 5688ms (View: 3918, DB: 1680) | 200 OK [http://0.0.0.0/set/4]
  [4;35;1mSQL (19.9ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (19.6ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing SetController#download_kml (for 127.0.0.1 at 2011-05-03 13:31:51) [GET]
  Parameters: {"controller"=>"set", "action"=>"download_kml", "id"=>"4"}
  [4;35;1mUser Columns (12.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (19.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = '1') LIMIT 1[0m
  [4;35;1mSQL (7.8ms)[0m   [0mBEGIN[0m
  [4;36;1mUser Update (18.5ms)[0m   [0;1mUPDATE `users` SET `last_request_at` = '2011-05-03 17:31:51', `perishable_token` = 'AACV7xcAPObG4OarSk' WHERE `id` = 1[0m
  [4;35;1mSQL (17.9ms)[0m   [0mCOMMIT[0m
  [4;36;1mQuery Columns (10.7ms)[0m   [0;1mSHOW FIELDS FROM `queries`[0m
  [4;35;1mQuery Load (16.7ms)[0m   [0mSELECT * FROM `queries` WHERE (`queries`.`id` = 4) [0m
  [4;36;1mSQL (19.8ms)[0m   [0;1mBEGIN[0m
  [4;35;1mQuery Update (15.3ms)[0m   [0mUPDATE `queries` SET `sql` = 'SELECT sequences.*,\npathogen_id,\nhost_id,\nlocation_id,\nhosts.name as host,\nproteins.name as protein,\npathogens.name as subtype,\ncountry,\ndate,\nvirus_name,\nlocations.country+\'/\'+locations.local as location_name,\nlongitude,\nlatitude\nFROM sequences, isolates,locations,hosts,pathogens,proteins\nWHERE isolate_id=isolates.id and location_id =locations.id and host_id=hosts.id and pathogen_id = pathogens.id and protein_id = proteins.id\nand date > \'2008-04-15 00:00:00 UTC\'\nand date < \'2011-04-15 00:00:00 UTC\' and pathogen_id in(1) and protein_id in(1)', `updated_at` = '2011-05-03 17:31:52' WHERE `id` = 4[0m
  [4;36;1mSQL (19.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSequence Load (150.4ms)[0m   [0mSELECT sequences.*,
pathogen_id,
host_id,
location_id,
hosts.name as host,
proteins.name as protein,
pathogens.name as subtype,
country,
date,
virus_name,
locations.country+'/'+locations.local as location_name,
longitude,
latitude
FROM sequences, isolates,locations,hosts,pathogens,proteins
WHERE isolate_id=isolates.id and location_id =locations.id and host_id=hosts.id and pathogen_id = pathogens.id and protein_id = proteins.id
and date > '2008-04-15 00:00:00 UTC'
and date < '2011-04-15 00:00:00 UTC' and pathogen_id in(1) and protein_id in(1)[0m
  [4;36;1mSequence Columns (13.0ms)[0m   [0;1mSHOW FIELDS FROM `sequences`[0m

NameError (undefined local variable or method `geodata' for #<Query:0x00000007793978>):
  app/models/query.rb:164:in `make_kml'
  app/controllers/set_controller.rb:82:in `download_kml'
  <internal:prelude>:10:in `synchronize'

Rendered rescues/_trace (18.8ms)
Rendered rescues/_request_and_response (1.0ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (19.9ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (19.6ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing SetController#download_kml (for 127.0.0.1 at 2011-05-03 13:32:23) [GET]
  Parameters: {"controller"=>"set", "action"=>"download_kml", "id"=>"4"}
  [4;35;1mUser Columns (20.8ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (13.9ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = '1') LIMIT 1[0m
  [4;35;1mSQL (16.9ms)[0m   [0mBEGIN[0m
  [4;36;1mUser Update (15.0ms)[0m   [0;1mUPDATE `users` SET `last_request_at` = '2011-05-03 17:32:23', `perishable_token` = 'wHCelCg9NPNRJvM9LMln' WHERE `id` = 1[0m
  [4;35;1mSQL (18.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mQuery Columns (12.0ms)[0m   [0;1mSHOW FIELDS FROM `queries`[0m
  [4;35;1mQuery Load (16.9ms)[0m   [0mSELECT * FROM `queries` WHERE (`queries`.`id` = 4) [0m
  [4;36;1mSQL (19.9ms)[0m   [0;1mBEGIN[0m
  [4;35;1mQuery Update (15.3ms)[0m   [0mUPDATE `queries` SET `sql` = 'SELECT sequences.*,\npathogen_id,\nhost_id,\nlocation_id,\nhosts.name as host,\nproteins.name as protein,\npathogens.name as subtype,\ncountry,\ndate,\nvirus_name,\nlocations.country+\'/\'+locations.local as location_name,\nlongitude,\nlatitude\nFROM sequences, isolates,locations,hosts,pathogens,proteins\nWHERE isolate_id=isolates.id and location_id =locations.id and host_id=hosts.id and pathogen_id = pathogens.id and protein_id = proteins.id\nand date > \'2008-04-15 00:00:00 UTC\'\nand date < \'2011-04-15 00:00:00 UTC\' and pathogen_id in(1) and protein_id in(1)', `updated_at` = '2011-05-03 17:32:23' WHERE `id` = 4[0m
  [4;36;1mSQL (19.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSequence Load (150.2ms)[0m   [0mSELECT sequences.*,
pathogen_id,
host_id,
location_id,
hosts.name as host,
proteins.name as protein,
pathogens.name as subtype,
country,
date,
virus_name,
locations.country+'/'+locations.local as location_name,
longitude,
latitude
FROM sequences, isolates,locations,hosts,pathogens,proteins
WHERE isolate_id=isolates.id and location_id =locations.id and host_id=hosts.id and pathogen_id = pathogens.id and protein_id = proteins.id
and date > '2008-04-15 00:00:00 UTC'
and date < '2011-04-15 00:00:00 UTC' and pathogen_id in(1) and protein_id in(1)[0m
  [4;36;1mSequence Columns (13.4ms)[0m   [0;1mSHOW FIELDS FROM `sequences`[0m
Sending data test.kml
Completed in 447ms (View: 2, DB: 385) | 200 OK [http://0.0.0.0/set/download_kml/4]
  [4;35;1mSQL (20.0ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (19.5ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing SetController#download_kml (for 127.0.0.1 at 2011-05-03 13:34:50) [GET]
  Parameters: {"controller"=>"set", "action"=>"download_kml", "id"=>"4"}
  [4;35;1mUser Columns (11.9ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (16.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = '1') LIMIT 1[0m
  [4;35;1mSQL (17.0ms)[0m   [0mBEGIN[0m
  [4;36;1mUser Update (15.0ms)[0m   [0;1mUPDATE `users` SET `last_request_at` = '2011-05-03 17:34:50', `perishable_token` = 'fHtgpELd15mvQgY5QzvX' WHERE `id` = 1[0m
  [4;35;1mSQL (18.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mQuery Columns (11.9ms)[0m   [0;1mSHOW FIELDS FROM `queries`[0m
  [4;35;1mQuery Load (16.7ms)[0m   [0mSELECT * FROM `queries` WHERE (`queries`.`id` = 4) [0m
  [4;36;1mSQL (17.4ms)[0m   [0;1mBEGIN[0m
  [4;35;1mQuery Update (18.2ms)[0m   [0mUPDATE `queries` SET `sql` = 'SELECT sequences.*,\npathogen_id,\nhost_id,\nlocation_id,\nhosts.name as host,\nproteins.name as protein,\npathogens.name as subtype,\ncountry,\ndate,\nvirus_name,\nlocations.country+\'/\'+locations.local as location_name,\nlongitude,\nlatitude\nFROM sequences, isolates,locations,hosts,pathogens,proteins\nWHERE isolate_id=isolates.id and location_id =locations.id and host_id=hosts.id and pathogen_id = pathogens.id and protein_id = proteins.id\nand date > \'2008-04-15 00:00:00 UTC\'\nand date < \'2011-04-15 00:00:00 UTC\' and pathogen_id in(1) and protein_id in(1)', `updated_at` = '2011-05-03 17:34:50' WHERE `id` = 4[0m
  [4;36;1mSQL (19.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSequence Load (140.4ms)[0m   [0mSELECT sequences.*,
pathogen_id,
host_id,
location_id,
hosts.name as host,
proteins.name as protein,
pathogens.name as subtype,
country,
date,
virus_name,
locations.country+'/'+locations.local as location_name,
longitude,
latitude
FROM sequences, isolates,locations,hosts,pathogens,proteins
WHERE isolate_id=isolates.id and location_id =locations.id and host_id=hosts.id and pathogen_id = pathogens.id and protein_id = proteins.id
and date > '2008-04-15 00:00:00 UTC'
and date < '2011-04-15 00:00:00 UTC' and pathogen_id in(1) and protein_id in(1)[0m
  [4;36;1mSequence Columns (13.2ms)[0m   [0;1mSHOW FIELDS FROM `sequences`[0m
Sending data test.kml
Completed in 418ms (View: 2, DB: 369) | 200 OK [http://0.0.0.0/set/download_kml/4]
